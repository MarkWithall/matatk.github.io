@viewport, @-ms-viewport {
	zoom: 1.0;
	width: extend-to-zoom;
}

body {
	background-color: #eee;
	color: #333;
	font-family: Verdana, sans-serif;
	font-size: 1.2em;
	line-height: 1.5em;
}

/* HTML5 for IE */
header, main, footer { display: block; }

nav summary { padding-bottom: 0.5em; }
nav ul {
	list-style-type: none;
	margin: 0;
	padding: 0;
}
nav a {
	display: block;
	padding: 0.5em;
}

#menu-vertical li:last-child { padding-bottom: 1em; }

#menu-horizontal { display: none; }
#menu-horizontal ul { display: flex; }
#menu-horizontal li { flex-grow: 1; }

main, footer { border-top: 0.1em solid #888; }

h1 { font-size: 2em; }
h1, h2, h3, h4, h5, h6 { line-height: 1.2em; }

a {
	color: purple;  /* #800080 */
	-webkit-transition: 0.25s;
	-moz-transition: 0.25s;
	-o-transition: 0.25s;
	transition: 0.25s;
}
a:focus, a:hover {
	background-color: #888;
	color: white;  /* Can't use #eee as that's <4.5:1 (3:1). */
	/* FIXME: Actually white is only 3.5:1! */
}

/* Stop gap before nested lists */
li p { margin-bottom: 0; }

/* TODO should this be in highlighting CSS only? */
/* This causes some code samples to scroll horizontally; is that really good? */
pre {
	overflow: auto;
	/* white-space: pre-wrap; */  /* not sure about this */
}

/* TODO (needs more research): for some reason the monospace font has a bigger
 * line-height than the surrounding text. This fixes it without making the font
 * any smaller. Thanks to Dan Nye. */
code.highlighter-rouge { line-height: 1; }
/* Note: the <code> elements in <pre> blocks don't get this class. */

/* Hide from visual users but not screen readers */
.visually-hidden {
	/* <http://yaccessibilityblog.com/library/css-clip-hidden-content.html> */
	position: absolute !important;
	clip: rect(1px, 1px, 1px, 1px);
	padding: 0 !important;
	border: 0 !important;
	height: 1px !important;
	width: 1px !important;
	overflow: hidden;
}

dl.article-meta dt, dl.article-meta dd {
	display: inline;
	margin: 0;
}
dl.article-meta dt:not(:first-child):before {
	content: "\A";
	white-space: pre;
}
dl.article-meta dt:after { content: ":"; }
dl.article-meta ul { margin-top: 0; }

#home-picture {
	background-image: url("http://gravatar.com/avatar/56e9bd14e2fd4b3e85c62baae76ef700?s=250");
	background-repeat: no-repeat;
	width: 250px;
	height: 250px;
}

#tag-cloud { line-height: 2.5em;  }
/* a little cosy, with the largest font size of 4em */

img {
	width: 100%;
	box-shadow: 0.25em 0.25em #888;  /* same colour as blockquote, highlight */
}

blockquote {
	margin: 0;
	padding-left: 1em;
	padding-right: 1em;
	border-left: 0.25em solid #888; /* same as syntax-highlighted code */
	color: #6c6c6c;
	/* Colours chosen because:
		- Contrast of text to background is OK by WCAG 2 Level AA.
		- The thick border looks (about) the same colour as the text and is
		  WCAG 2.1-compliant.
		- Contrast betwwen <blockquote> and <body> text is greater than 2:1,
		  so some will be able to see the difference, but if not, the sidebar
		  and incrased margin are there.
	 */
}

ul ul { list-style-type: square; }  /* default: circle - which isn't clear */

ol ol { list-style-type: lower-alpha; }
ol ol ol { list-style-type: lower-roman; }


@media screen and (min-width: 42em) {
	#menu-vertical { display: none; }
	#menu-horizontal { display: block; }

	nav a { padding: 0.75em; }
	body {
		margin-left: 1em;
		margin-right: 1em;
	}
}


@media screen and (min-width: 45em) {
	nav a { padding: 1em; }
}


/* Widest layout:
 + Capped body text width (45em in inherited size)
 + Give body at least 0.5em left+right margins.
 + Float home page picture.
 + Max padding for menu items.
 Viewport size in [r]ems: (45 + 1) * 1.2 = 55.2 */
/* TODO: check if the above line is correct - isn't rems the body font size? */
@media screen and (min-width: 55.2em) {
	body {
		margin: auto;
		max-width: 45em;
	}

	nav a { padding: 1.5em; }

	#home-content {
		float: right;
		margin-left: 250px;
		padding-left: 2em;
	}

	footer { clear: both; }
}


@media (prefers-color-scheme: dark) {
	/* Thanks https://css-tricks.com/dark-modes-with-css/ */
	/* and http://www.mattlag.com/scripting/hexcolorinverter.php */
	/* and https://developer.paciellogroup.com/resources/contrastanalyser/ */

	body {
		background-color: #333;
		color: #eee;
	}

	/* The inverse of #888, used for borders above, is #777. Howecer
	 * #777 on #333 (the background colour) has insufficient contrast,
	 * so we'll just keep #888. */

	blockquote { color: #939393; }

	/* #7fff7f; - Bit-flip inverse looks quite nice */
	/* #ff80ff; - Lightness inverse matches the theme */
	a { color: #7fff7f; }
	a:focus, a:hover {
		/* Use light-mode background as above */
		color: black;  /* This is actually WCAG-OK and white isn't! */
	}
}
